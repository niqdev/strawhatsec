#include <stdio.h>

// gcc pointer_types.c -o pointer_types.out
int main() {
  int i;

  char char_array[5] = {'a', 'b', 'c', 'd', 'e'};
  int int_array[5] = {1, 2, 3, 4, 5};

  char *char_pointer;
  int *int_pointer;

  // see pointer_types.c
  //char_pointer = char_array;
  //int_pointer = int_array;

  // see pointer_types2.c
  //char_pointer = int_array; // The char_pointer and int_pointer now point to incompatible data types.
  //int_pointer = char_array; // This means that adding 1 to the int_pointer will increment the address by 4 each time, even if there are only 5 bytes of data

  // see pointer_types3.c
  // The data is typecast into the pointerâ€™s data type.
  // This will prevent the C compiler from complaining about the conflicting data types;
  // however, any pointer arithmetic will still be incorrect
  char_pointer = (char *) int_array;
  int_pointer = (int *) char_array;

  for(i=0; i < 5; i++) { // Iterate through the int array with the int_pointer.
    // see pointer_types.c and pointer_types2.c
    //printf("[integer pointer] points to %p, which contains the integer %d\n", int_pointer, *int_pointer);
    //int_pointer = int_pointer + 1;

    // see pointer_types3.c
    printf("[integer pointer] points to %p, which contains the char '%c'\n", int_pointer, *int_pointer);
    // when 1 is added to the pointers, they must first be typecast into the correct data type
    // so the address is incremented by the correct amount
    // then this pointer needs to be typecast back into the pointer's data type once again
    int_pointer = (int *) ((char *) int_pointer + 1);
  }

  for(i=0; i < 5; i++) { // Iterate through the char array with the char_pointer.
    // see pointer_types.c and pointer_types2.c
    //printf("[char pointer] points to %p, which contains the char '%c'\n", char_pointer, *char_pointer);
    //char_pointer = char_pointer + 1;

    // see pointer_types3.c
    printf("[char pointer] points to %p, which contains the integer %d\n", char_pointer, *char_pointer);
    char_pointer = (char *) ((int *) char_pointer + 1);
  }
}

/*
- C compiler demands a data type for every pointer
- format parameter %p to output memory addresses is equivalent to 0x%08x
- see memory address char is 1 byte, int is 4 bytes
- the pointer type determines the size of the data it points to, it's important that the type is correct
- typecasting is just a way to change the type of a variable on the fly
- a void pointer is a typeless pointer: it cannot be dereferenced unless it has a type, and it must also be typecast before doing pointer arithmetic
- a void pointer's main purpose is to simply hold a memory address

OUTPUT

[integer pointer] points to 0xffa2a550, which contains the integer 1
[integer pointer] points to 0xffa2a554, which contains the integer 2
[integer pointer] points to 0xffa2a558, which contains the integer 3
[integer pointer] points to 0xffa2a55c, which contains the integer 4
[integer pointer] points to 0xffa2a560, which contains the integer 5
[char pointer] points to 0xffa2a567, which contains the char 'a'
[char pointer] points to 0xffa2a568, which contains the char 'b'
[char pointer] points to 0xffa2a569, which contains the char 'c'
[char pointer] points to 0xffa2a56a, which contains the char 'd'
[char pointer] points to 0xffa2a56b, which contains the char 'e'

// see pointer_types2.c
[integer pointer] points to 0xffc32ae7, which contains the integer 1684234849
[integer pointer] points to 0xffc32aeb, which contains the integer 97058917
[integer pointer] points to 0xffc32aef, which contains the integer -1020587864
[integer pointer] points to 0xffc32af3, which contains the integer 255
[integer pointer] points to 0xffc32af7, which contains the integer 0
[char pointer] points to 0xffc32ad0, which contains the char ''
[char pointer] points to 0xffc32ad1, which contains the char ''
[char pointer] points to 0xffc32ad2, which contains the char ''
[char pointer] points to 0xffc32ad3, which contains the char ''
[char pointer] points to 0xffc32ad4, which contains the char ''

// see pointer_types3.c
[integer pointer] points to 0xffa1a627, which contains the char 'a'
[integer pointer] points to 0xffa1a628, which contains the char 'b'
[integer pointer] points to 0xffa1a629, which contains the char 'c'
[integer pointer] points to 0xffa1a62a, which contains the char 'd'
[integer pointer] points to 0xffa1a62b, which contains the char 'e'
[char pointer] points to 0xffa1a610, which contains the integer 1
[char pointer] points to 0xffa1a614, which contains the integer 2
[char pointer] points to 0xffa1a618, which contains the integer 3
[char pointer] points to 0xffa1a61c, which contains the integer 4
[char pointer] points to 0xffa1a620, which contains the integer 5
*/
